!function(a){"use strict";function e(){d(),n(),s(),r(),l()}function t(){h()}function o(){}function i(){}function d(){var e=a("audio.mkd-blog-audio");e.mediaelementplayer({audioWidth:"100%"})}function r(){if(a(".mkd-blog-holder.mkd-blog-type-split").length){var e=a(".mkd-blog-holder.mkd-blog-type-split");e.waitForImages(function(){e.isotope({layoutMode:"vertical"})}),e.find("article").appear(function(){a(this).addClass("appeared")})}}function n(){if(a(".mkd-blog-holder.mkd-blog-type-masonry").length){var e=a(".mkd-blog-holder.mkd-blog-type-masonry");e.waitForImages(function(){e.isotope({itemSelector:"article",resizable:!1,masonry:{columnWidth:".mkd-blog-masonry-grid-sizer",gutter:".mkd-blog-masonry-grid-gutter"}})});var t=a(".mkd-filter-blog-holder");a(".mkd-filter").click(function(){var o=a(this),i=o.attr("data-filter");return t.find(".mkd-active").removeClass("mkd-active"),o.addClass("mkd-active"),e.isotope({filter:i}),!1})}}function l(){var e=a(".mkd-blog-holder.mkd-blog-type-masonry-gallery");e.length&&e.each(function(){var e=a(this);m(e),c(e),a(window).resize(function(){m(e),c(e)}),mkd.htmlEl.hasClass("touch")||a(window).load(function(){var t=e.find("article"),o=t.first().offset().top,i=0,d=0;t.each(function(){var e=a(this);e.offset().top==o&&i++}),t.not("mkd-appeared").appear(function(){var e=a(this);d==i&&(d=0),setTimeout(function(){e.addClass("mkd-appeared")},200*d),d++},{accX:0,accY:mkdGlobalVars.vars.mkdElementAppearAmount})})})}function c(a){a.waitForImages(function(){a.isotope({itemSelector:"article",resizable:!1,layoutMode:"packery",packery:{columnWidth:".mkd-blog-masonry-gallery-grid-sizer"}}),a.addClass("mkd-appeared")})}function m(a){var e=a.find(".mkd-blog-masonry-gallery-grid-sizer").width(),t=a.find(".mkd-post-size-square"),o=a.find(".mkd-post-size-large-width"),i=a.find(".mkd-post-size-large-height"),d=a.find(".mkd-post-size-large-width-height");t.css("height",e),o.css("height",e),i.css("height",Math.round(2*e)),mkd.windowWidth>600?d.css("height",Math.round(2*e)):d.css("height",e)}function s(){var e,t=a(".mkd-blog-holder.mkd-blog-load-more");e=t.hasClass("mkd-blog-type-masonry")?t.next().find(".mkd-btn"):t.find(".mkd-load-more-ajax-pagination .mkd-btn"),e.on("click",function(a){a.preventDefault(),a.stopPropagation(),g(t,e)})}function h(){var e=a(".mkd-blog-holder.mkd-blog-infinite-scroll"),t=a(".mkd-infinite-scroll-trigger");t.length&&mkd.window.scroll(function(){!e.hasClass("mkd-ajax-started")&&mkd.windowHeight+mkd.window.scrollTop()>t.offset().top&&(e.addClass("mkd-ajax-started"),g(e,""))})}function g(e,t){var o,i,d=u(e);if(i=e.data("max-pages"),o=d.nextPage,o<=i){var r=f(d);a.ajax({type:"POST",data:r,url:MikadoAjaxUrl,success:function(t){o++,e.data("next-page",o);var i=a.parseJSON(t),d=i.html;e.waitForImages(function(){e.hasClass("mkd-blog-type-masonry")?(e.append(d).isotope("reloadItems").isotope({sortBy:"original-order"}),n()):e.find("article:last").after(d),setTimeout(function(){mkd.modules.blog.mkdInitAudioPlayer(),mkd.modules.common.mkdSlickSlider(),mkd.modules.common.mkdFluidVideo()},400),e.removeClass("mkd-ajax-started")})}})}o===i&&""!==t&&t.hide()}function u(a){var e={};return e.nextPage="",e.number="",e.category="",e.blogType="",e.archiveCategory="",e.archiveAuthor="",e.archiveTag="",e.archiveDay="",e.archiveMonth="",e.archiveYear="","undefined"!=typeof a.data("next-page")&&a.data("next-page")!==!1&&(e.nextPage=a.data("next-page")),"undefined"!=typeof a.data("post-number")&&a.data("post-number")!==!1&&(e.number=a.data("post-number")),"undefined"!=typeof a.data("category")&&a.data("category")!==!1&&(e.category=a.data("category")),"undefined"!=typeof a.data("blog-type")&&a.data("blog-type")!==!1&&(e.blogType=a.data("blog-type")),"undefined"!=typeof a.data("archive-category")&&a.data("archive-category")!==!1&&(e.archiveCategory=a.data("archive-category")),"undefined"!=typeof a.data("archive-author")&&a.data("archive-author")!==!1&&(e.archiveAuthor=a.data("archive-author")),"undefined"!=typeof a.data("archive-tag")&&a.data("archive-tag")!==!1&&(e.archiveTag=a.data("archive-tag")),"undefined"!=typeof a.data("archive-day")&&a.data("archive-day")!==!1&&(e.archiveDay=a.data("archive-day")),"undefined"!=typeof a.data("archive-month")&&a.data("archive-month")!==!1&&(e.archiveMonth=a.data("archive-month")),"undefined"!=typeof a.data("archive-year")&&a.data("archive-year")!==!1&&(e.archiveYear=a.data("archive-year")),e}function f(a){var e={action:"topfit_mikado_blog_load_more",nextPage:a.nextPage,number:a.number,category:a.category,blogType:a.blogType,archiveCategory:a.archiveCategory,archiveAuthor:a.archiveAuthor,archiveTag:a.archiveTag,archiveDay:a.archiveDay,archiveMonth:a.archiveMonth,archiveYear:a.archiveYear};return e}var y={};mkd.modules.blog=y,y.mkdInitAudioPlayer=d,y.mkdInitBlogMasonry=n,y.mkdInitBlogMasonryGallery=l,y.mkdInitBlogSplit=r,y.mkdInitBlogLoadMore=s,y.mkdOnDocumentReady=e,y.mkdOnWindowLoad=t,y.mkdOnWindowResize=o,y.mkdOnWindowScroll=i,a(document).ready(e),a(window).load(t),a(window).resize(o),a(window).scroll(i)}(jQuery);